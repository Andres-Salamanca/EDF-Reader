<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDF File Processor</title>
</head>
<body>
    <h1>EDF File Processor</h1>
    <input type="file" id="fileInput" >
    <pre id="output"></pre>

    <script src="edf.js"></script>
    <script>
        // This function will run when the WebAssembly module is fully initialized
        Module['onRuntimeInitialized'] = function() {
            const fileInput = document.getElementById('fileInput');
            const output = document.getElementById('output');

            fileInput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                const reader = new FileReader();

                reader.onload = (e) => {
                    const fileData = e.target.result;

                    // Initialize the EDF class in WebAssembly
                    const edf = new Module.EDF(fileData);

                    // Capture output from WebAssembly methods
                    output.textContent += "Header Records:\n";
                    edf.PrintHeaderRecords();

                    output.textContent += "\nData Records:\n";
                    edf.PrintDataRecords();

                    output.textContent += "\nSize of Signals:\n";
                    edf.PrintSizeSignals();

                    output.textContent += "\nTop 5 Values:\n";
                    edf.PrintTopValues(5);
                };

                reader.readAsBinaryString(file);
            });
        };
    </script>
</body>
</html>
